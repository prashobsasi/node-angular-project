'use strict';

const path = require('path');
process.env.NODE_CONFIG_DIR = path.resolve(__dirname, './config');

const connector = require('./connector');
const callbacksRegistry = connector.callbacksRegistry;

module.exports = {
  connect: connector.connect
};

function onExit(err) {
  if (callbacksRegistry.size > 0) {
    console.log('\u2620; done() not called, connection aborted ' + String.fromCharCode(2620));
    process.exit(1);
  }
}
process.on('SIGINT', onExit);
process.on('beforeExit', onExit);
